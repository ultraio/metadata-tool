name: Slack Release Action
on:
    push:
        branches:
            - main
jobs:
    slack_upload_job:
        runs-on: ubuntu-latest
        name: Upload release on slack
        steps:
            - name: Checkout
              uses: actions/checkout@v3
            - run: npm i
            - run: npm run build
            - run: ls ${{ github.workspace }}
            - name: Upload to slack step
              uses: MeilCli/slack-upload-file@v3
              with:
                  slack_token: ${{ secrets.SLACK_TOKEN }}
                  channel_id: ${{ secrets.SLACK_CHANNEL_ID }}
                  file_type: auto
                  file_path: releases/*
                  initial_comment: 'ðŸŽŠ A new version of Metadata tool is available to download ðŸŽŠ'
            - run: echo "Finished. Job's status is ${{ job.status }}."
